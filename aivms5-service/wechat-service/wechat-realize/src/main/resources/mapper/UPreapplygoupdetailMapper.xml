<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qlhx.dao.UPreapplygoupdetailMapper">
  <resultMap id="BaseResultMap" type="com.qlhx.model.UPreapplygoupdetail">
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="applyid" jdbcType="VARCHAR" property="applyid" />
    <result column="openid" jdbcType="VARCHAR" property="openid" />
    <result column="utel" jdbcType="VARCHAR" property="utel" />
    <result column="uname" jdbcType="VARCHAR" property="uname" />
    <result column="jointime" jdbcType="TIMESTAMP" property="jointime" />
    <result column="rstatus" jdbcType="INTEGER" property="rstatus" />
    <result column="accessrecordid" jdbcType="INTEGER" property="accessrecordid" />
    <result column="syncid" jdbcType="VARCHAR" property="syncid" />
    <result column="type" jdbcType="INTEGER" property="type" />
    <result column="companyCode" jdbcType="VARCHAR" property="companycode" />
    <result column="areaCode" jdbcType="VARCHAR" property="areacode" />
    <result column="tabTime" jdbcType="TIMESTAMP" property="tabtime" />
    <result column="uploadTime" jdbcType="TIMESTAMP" property="uploadtime" />
    <result column="cardNum" jdbcType="VARCHAR" property="cardnum" />
    <result column="inviterOpenid" jdbcType="VARCHAR" property="inviterOpenid" />
    <result column="respMsg" jdbcType="VARCHAR" property="respMsg" />
    <result column="isConfirm" jdbcType="INTEGER" property="isConfirm" />
    <result column="isPush" jdbcType="INTEGER" property="isPush" />
  </resultMap>
  <sql id="Base_Column_List">
    id, applyid, openid, utel, uname, jointime, rstatus, accessrecordid, syncid, type, 
    companyCode,areaCode, tabTime, uploadTime,cardNum,inviterOpenid,respMsg,isConfirm,isPush
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from u_preapplygoupdetail
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from u_preapplygoupdetail
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.qlhx.model.UPreapplygoupdetail">
    insert into u_preapplygoupdetail (id, applyid, openid, 
      utel, uname, jointime, 
      rstatus, accessrecordid, syncid, 
      type, companyCode, tabTime, 
      uploadTime)
    values (#{id,jdbcType=INTEGER}, #{applyid,jdbcType=VARCHAR}, #{openid,jdbcType=VARCHAR}, 
      #{utel,jdbcType=VARCHAR}, #{uname,jdbcType=VARCHAR}, #{jointime,jdbcType=TIMESTAMP}, 
      #{rstatus,jdbcType=INTEGER}, #{accessrecordid,jdbcType=INTEGER}, #{syncid,jdbcType=VARCHAR}, 
      #{type,jdbcType=INTEGER}, #{companycode,jdbcType=VARCHAR}, #{tabtime,jdbcType=TIMESTAMP}, 
      #{uploadtime,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.qlhx.model.UPreapplygoupdetail">
    insert into u_preapplygoupdetail
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="applyid != null">
        applyid,
      </if>
      <if test="openid != null">
        openid,
      </if>
      <if test="utel != null">
        utel,
      </if>
      <if test="uname != null">
        uname,
      </if>
      <if test="jointime != null">
        jointime,
      </if>
      <if test="rstatus != null">
        rstatus,
      </if>
      <if test="accessrecordid != null">
        accessrecordid,
      </if>
      <if test="syncid != null">
        syncid,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="companycode != null">
        companyCode,
      </if>
      <if test="areacode != null">
        areaCode,
      </if>
      <if test="tabtime != null">
        tabTime,
      </if>
      <if test="uploadtime != null">
        uploadTime,
      </if>
       <if test="cardnum != null">
        cardNum,
      </if>
      <if test="inviterOpenid != null">
        inviterOpenid,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="applyid != null">
        #{applyid,jdbcType=VARCHAR},
      </if>
      <if test="openid != null">
        #{openid,jdbcType=VARCHAR},
      </if>
      <if test="utel != null">
        #{utel,jdbcType=VARCHAR},
      </if>
      <if test="uname != null">
        #{uname,jdbcType=VARCHAR},
      </if>
      <if test="jointime != null">
        #{jointime,jdbcType=TIMESTAMP},
      </if>
      <if test="rstatus != null">
        #{rstatus,jdbcType=INTEGER},
      </if>
      <if test="accessrecordid != null">
        #{accessrecordid,jdbcType=INTEGER},
      </if>
      <if test="syncid != null">
        #{syncid,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        #{type,jdbcType=INTEGER},
      </if>
      <if test="companycode != null">
        #{companycode,jdbcType=VARCHAR},
      </if>
      <if test="areacode != null">
        #{areacode,jdbcType=VARCHAR},
      </if>
      <if test="tabtime != null">
        #{tabtime,jdbcType=TIMESTAMP},
      </if>
      <if test="uploadtime != null">
        #{uploadtime,jdbcType=TIMESTAMP},
      </if>
      <if test="cardnum != null">
        #{cardnum,jdbcType=VARCHAR},
      </if>
      <if test="inviterOpenid != null">
        #{inviterOpenid,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.qlhx.model.UPreapplygoupdetail">
    update u_preapplygoupdetail
    <set>
      <if test="applyid != null">
        applyid = #{applyid,jdbcType=VARCHAR},
      </if>
      <if test="openid != null">
        openid = #{openid,jdbcType=VARCHAR},
      </if>
      <if test="utel != null">
        utel = #{utel,jdbcType=VARCHAR},
      </if>
      <if test="uname != null">
        uname = #{uname,jdbcType=VARCHAR},
      </if>
      <if test="jointime != null">
        jointime = #{jointime,jdbcType=TIMESTAMP},
      </if>
      <if test="rstatus != null">
        rstatus = #{rstatus,jdbcType=INTEGER},
      </if>
      <if test="accessrecordid != null">
        accessrecordid = #{accessrecordid,jdbcType=INTEGER},
      </if>
      <if test="syncid != null">
        syncid = #{syncid,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=INTEGER},
      </if>
      <if test="companycode != null">
        companyCode = #{companycode,jdbcType=VARCHAR},
      </if>
      <if test="areacode != null">
        areaCode = #{areacode,jdbcType=VARCHAR},
      </if>
      <if test="tabtime != null">
        tabTime = #{tabtime,jdbcType=TIMESTAMP},
      </if>
      <if test="uploadtime != null">
        uploadTime = #{uploadtime,jdbcType=TIMESTAMP},
      </if>
      <if test="cardnum != null">
        cardNum = #{cardnum,jdbcType=TIMESTAMP},
      </if>
      <if test="respMsg != null">
        respMsg = #{respMsg,jdbcType=VARCHAR},
      </if>
      <if test="isConfirm != null">
        isConfirm = #{isConfirm,jdbcType=INTEGER},
      </if>
      <if test="isPush != null">
        isPush = #{isPush,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  
  <update id="updateCardNum" parameterType="com.qlhx.model.UPreapplygoupdetail">
    update u_preapplygoupdetail
    <set>
      <if test="accessrecordid != null">
        accessrecordid = #{accessrecordid,jdbcType=INTEGER},
      </if>
      <if test="cardnum != null">
        cardNum = #{cardnum,jdbcType=TIMESTAMP},
      </if>
    </set>
    where applyid = #{applyid,jdbcType=VARCHAR} and areaCode = #{areacode,jdbcType=VARCHAR}
  </update>
  
  
  <update id="updateByPrimaryKey" parameterType="com.qlhx.model.UPreapplygoupdetail">
    update u_preapplygoupdetail
    set applyid = #{applyid,jdbcType=VARCHAR},
      openid = #{openid,jdbcType=VARCHAR},
      utel = #{utel,jdbcType=VARCHAR},
      uname = #{uname,jdbcType=VARCHAR},
      jointime = #{jointime,jdbcType=TIMESTAMP},
      rstatus = #{rstatus,jdbcType=INTEGER},
      accessrecordid = #{accessrecordid,jdbcType=INTEGER},
      syncid = #{syncid,jdbcType=VARCHAR},
      type = #{type,jdbcType=INTEGER},
      companyCode = #{companycode,jdbcType=VARCHAR},
      tabTime = #{tabtime,jdbcType=TIMESTAMP},
      uploadTime = #{uploadtime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>
  
   <select id="preapplygoupdetaillist" resultMap="BaseResultMap">
    select 
    pd.id, pd.applyid, pd.openid, pd.utel, pd.uname, pd.jointime, pd.rstatus, pd.accessrecordid, pd.syncid, pd.type, 
    pd.companyCode,pd.areaCode, pd.tabTime, pd.uploadTime,pd.cardNum
    from u_preapplygoupdetail pd, u_preapplygoup p
    where pd.syncid = p.syncid and pd.areaCode = p.areaCode  
     and pd.areaCode = #{areacode,jdbcType=VARCHAR}
    <if test="syncid != null">
        and pd.syncid = #{syncid,jdbcType=VARCHAR}
    </if>
    <if test="isActive != null">
        and p.isActive = #{isActive,jdbcType=INTEGER}
    </if>
    <if test="tabTime != null">
        and pd.tabTime &gt; #{tabTime}
    </if>
    <if test="notHaveCardNum != null">
        and (pd.cardNum is null or pd.cardNum ='')
    </if>
  </select>
  
  <select id="selectByOpenIdAndSyncIdAndAreaCode" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from u_preapplygoupdetail
    where syncId = #{syncId,jdbcType=VARCHAR} and areaCode = #{areaCode,jdbcType=VARCHAR} and openId = #{openId,jdbcType=VARCHAR}
  </select>
  
   <update id="updateOpenIdIsNull" parameterType="java.util.Map">
    update u_preapplygoupdetail
    <set>
        openid = #{openid,jdbcType=VARCHAR},
     </set>
    where utel = #{utel,jdbcType=VARCHAR} and areaCode = #{areacode,jdbcType=VARCHAR} and openid is null
  </update>
  
   <select id="selectBySyncId" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from u_preapplygoupdetail
    where syncId = #{syncId,jdbcType=VARCHAR} and areaCode = #{areaCode,jdbcType=VARCHAR}
  </select>
  
  <update id="updateByApplyid" parameterType="com.qlhx.model.UPreapplygoupdetail">
    update u_preapplygoupdetail
    <set>
      <if test="applyid != null">
        applyid = #{applyid,jdbcType=VARCHAR},
      </if>
      <if test="openid != null">
        openid = #{openid,jdbcType=VARCHAR},
      </if>
      <if test="utel != null">
        utel = #{utel,jdbcType=VARCHAR},
      </if>
      <if test="uname != null">
        uname = #{uname,jdbcType=VARCHAR},
      </if>
      <if test="jointime != null">
        jointime = #{jointime,jdbcType=TIMESTAMP},
      </if>
      <if test="rstatus != null">
        rstatus = #{rstatus,jdbcType=INTEGER},
      </if>
      <if test="accessrecordid != null">
        accessrecordid = #{accessrecordid,jdbcType=INTEGER},
      </if>
      <if test="syncid != null">
        syncid = #{syncid,jdbcType=VARCHAR},
      </if>
      <if test="type != null">
        type = #{type,jdbcType=INTEGER},
      </if>
      <if test="companycode != null">
        companyCode = #{companycode,jdbcType=VARCHAR},
      </if>
      <if test="areacode != null">
        areaCode = #{areacode,jdbcType=VARCHAR},
      </if>
      <if test="tabtime != null">
        tabTime = #{tabtime,jdbcType=TIMESTAMP},
      </if>
      <if test="uploadtime != null">
        uploadTime = #{uploadtime,jdbcType=TIMESTAMP},
      </if>
      <if test="cardnum != null">
        cardNum = #{cardnum,jdbcType=TIMESTAMP},
      </if>
      <if test="respMsg != null">
        respMsg = #{respMsg,jdbcType=VARCHAR},
      </if>
      <if test="isConfirm != null">
        isConfirm = #{isConfirm,jdbcType=INTEGER},
      </if>
      <if test="isPush != null">
        isPush = #{isPush,jdbcType=INTEGER},
      </if>
    </set>
    where applyid = #{applyid,jdbcType=VARCHAR} and areaCode = #{areacode,jdbcType=VARCHAR} and cardNum is null
  </update>
  
  <select id="selectByApplyid" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from u_preapplygoupdetail
    where applyid = #{applyid,jdbcType=VARCHAR} and areaCode = #{areaCode,jdbcType=VARCHAR}
  </select>
</mapper>