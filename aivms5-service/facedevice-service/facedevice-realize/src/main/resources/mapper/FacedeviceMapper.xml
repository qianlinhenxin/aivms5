<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.qlhx.dao.FacedeviceMapper" >
  <resultMap id="BaseResultMap" type="com.qlhx.model.Facedevice" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="sn" property="sn" jdbcType="VARCHAR" />
    <result column="ip" property="ip" jdbcType="VARCHAR" />
    <result column="port" property="port" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="driver" property="driver" jdbcType="VARCHAR" />
    <result column="model" property="model" jdbcType="VARCHAR" />
    <result column="producer" property="producer" jdbcType="VARCHAR" />
    <result column="useTime" property="usetime" jdbcType="TIMESTAMP" />
    <result column="position" property="position" jdbcType="VARCHAR" />
    <result column="gis" property="gis" jdbcType="VARCHAR" />
    <result column="manager" property="manager" jdbcType="VARCHAR" />
    <result column="createDate" property="createdate" jdbcType="TIMESTAMP" />
    <result column="online_status" property="onlineStatus" jdbcType="INTEGER" />
    <result column="run_status" property="runStatus" jdbcType="INTEGER" />
    <result column="last_online_time" property="lastOnlineTime" jdbcType="TIMESTAMP" />
    <result column="brand" property="brand" jdbcType="VARCHAR" />
    <result column="username" property="username" jdbcType="VARCHAR" />
    <result column="pwd" property="pwd" jdbcType="VARCHAR" />
    <result column="callurl" jdbcType="VARCHAR" property="callurl" />
    <result column="inorout" property="inorout" jdbcType="INTEGER" />
    <result column="isAlarm" property="isAlarm" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    id, sn, ip, port, name, driver, model, producer, useTime, position, gis, manager, 
    createDate, online_status, run_status, last_online_time, brand, username, pwd,callurl,inorout,isAlarm
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    select 
    <include refid="Base_Column_List" />
    from device_face
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    delete from device_face
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.qlhx.model.Facedevice" >
    insert into device_face (id, sn, ip, port, 
      name, driver, model, 
      producer, useTime, position, 
      gis, manager, createDate, 
      online_status, run_status, last_online_time, 
      brand, username, pwd,callurl,inorout,isAlarm
      )
    values (#{id,jdbcType=INTEGER}, #{sn,jdbcType=VARCHAR}, #{ip,jdbcType=VARCHAR}, #{port,jdbcType=VARCHAR}, 
      #{name,jdbcType=VARCHAR}, #{driver,jdbcType=VARCHAR}, #{model,jdbcType=VARCHAR}, 
      #{producer,jdbcType=VARCHAR}, #{usetime,jdbcType=TIMESTAMP}, #{position,jdbcType=VARCHAR}, 
      #{gis,jdbcType=VARCHAR}, #{manager,jdbcType=VARCHAR}, #{createdate,jdbcType=TIMESTAMP}, 
      #{onlineStatus,jdbcType=INTEGER}, #{runStatus,jdbcType=INTEGER}, #{lastOnlineTime,jdbcType=TIMESTAMP}, 
      #{brand,jdbcType=VARCHAR}, #{username,jdbcType=VARCHAR}, #{pwd,jdbcType=VARCHAR}, #{callurl,jdbcType=VARCHAR},#{inorout ,jdbcType=INTEGER },
      #{isAlarm ,jdbcType=INTEGER }
      )
  </insert>
  <insert id="insertSelective" useGeneratedKeys="true" keyProperty="id" parameterType="com.qlhx.model.Facedevice" >
    insert into device_face
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="sn != null" >
        sn,
      </if>
      <if test="ip != null" >
        ip,
      </if>
      <if test="port != null" >
        port,
      </if>
      <if test="name != null" >
        name,
      </if>
      <if test="driver != null" >
        driver,
      </if>
      <if test="model != null" >
        model,
      </if>
      <if test="producer != null" >
        producer,
      </if>
      <if test="usetime != null" >
        useTime,
      </if>
      <if test="position != null" >
        position,
      </if>
      <if test="gis != null" >
        gis,
      </if>
      <if test="manager != null" >
        manager,
      </if>
      <if test="createdate != null" >
        createDate,
      </if>
      <if test="onlineStatus != null" >
        online_status,
      </if>
      <if test="runStatus != null" >
        run_status,
      </if>
      <if test="lastOnlineTime != null" >
        last_online_time,
      </if>
      <if test="brand != null" >
        brand,
      </if>
      <if test="username != null" >
        username,
      </if>
      <if test="pwd != null" >
        pwd,
      </if>
      <if test="callurl != null" >
        callurl,
      </if>
      <if test="inorout != null" >
        inorout,
      </if>
      <if test="isAlarm != null" >
        isAlarm,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="sn != null" >
        #{sn,jdbcType=VARCHAR},
      </if>
      <if test="ip != null" >
        #{ip,jdbcType=VARCHAR},
      </if>
      <if test="port != null" >
        #{port,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="driver != null" >
        #{driver,jdbcType=VARCHAR},
      </if>
      <if test="model != null" >
        #{model,jdbcType=VARCHAR},
      </if>
      <if test="producer != null" >
        #{producer,jdbcType=VARCHAR},
      </if>
      <if test="usetime != null" >
        #{usetime,jdbcType=TIMESTAMP},
      </if>
      <if test="position != null" >
        #{position,jdbcType=VARCHAR},
      </if>
      <if test="gis != null" >
        #{gis,jdbcType=VARCHAR},
      </if>
      <if test="manager != null" >
        #{manager,jdbcType=VARCHAR},
      </if>
      <if test="createdate != null" >
        #{createdate,jdbcType=TIMESTAMP},
      </if>
      <if test="onlineStatus != null" >
        #{onlineStatus,jdbcType=INTEGER},
      </if>
      <if test="runStatus != null" >
        #{runStatus,jdbcType=INTEGER},
      </if>
      <if test="lastOnlineTime != null" >
        #{lastOnlineTime,jdbcType=TIMESTAMP},
      </if>
      <if test="brand != null" >
        #{brand,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        #{username,jdbcType=VARCHAR},
      </if>
      <if test="pwd != null" >
        #{pwd,jdbcType=VARCHAR},
      </if>
      <if test="callurl != null" >
        #{callurl,jdbcType=VARCHAR},
      </if>
      <if test="inorout != null" >
        #{inorout,jdbcType=INTEGER},
      </if>
      <if test="isAlarm != null" >
        #{isAlarm,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.qlhx.model.Facedevice" >
    update device_face
    <set >
      <if test="sn != null" >
        sn = #{sn,jdbcType=VARCHAR},
      </if>
      <if test="ip != null" >
        ip = #{ip,jdbcType=VARCHAR},
      </if>
      <if test="port != null" >
        port = #{port,jdbcType=VARCHAR},
      </if>
      <if test="name != null" >
        name = #{name,jdbcType=VARCHAR},
      </if>
      <if test="driver != null" >
        driver = #{driver,jdbcType=VARCHAR},
      </if>
      <if test="model != null" >
        model = #{model,jdbcType=VARCHAR},
      </if>
      <if test="producer != null" >
        producer = #{producer,jdbcType=VARCHAR},
      </if>
      <if test="usetime != null" >
        useTime = #{usetime,jdbcType=TIMESTAMP},
      </if>
      <if test="position != null" >
        position = #{position,jdbcType=VARCHAR},
      </if>
      <if test="gis != null" >
        gis = #{gis,jdbcType=VARCHAR},
      </if>
      <if test="manager != null" >
        manager = #{manager,jdbcType=VARCHAR},
      </if>
      <if test="createdate != null" >
        createDate = #{createdate,jdbcType=TIMESTAMP},
      </if>
      <if test="onlineStatus != null" >
        online_status = #{onlineStatus,jdbcType=INTEGER},
      </if>
      <if test="runStatus != null" >
        run_status = #{runStatus,jdbcType=INTEGER},
      </if>
      <if test="lastOnlineTime != null" >
        last_online_time = #{lastOnlineTime,jdbcType=TIMESTAMP},
      </if>
      <if test="brand != null" >
        brand = #{brand,jdbcType=VARCHAR},
      </if>
      <if test="username != null" >
        username = #{username,jdbcType=VARCHAR},
      </if>
      <if test="pwd != null" >
        pwd = #{pwd,jdbcType=VARCHAR},
      </if>
      <if test="callurl != null" >
        callurl = #{callurl,jdbcType=VARCHAR},
      </if>
      <if test="inorout != null" >
        inorout = #{inorout,jdbcType=INTEGER},
      </if>
      <if test="isAlarm != null" >
        isAlarm = #{isAlarm,jdbcType=INTEGER}
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.qlhx.model.Facedevice" >
    update device_face
    set sn = #{sn,jdbcType=VARCHAR},
      ip = #{ip,jdbcType=VARCHAR},
      port = #{port,jdbcType=VARCHAR},
      name = #{name,jdbcType=VARCHAR},
      driver = #{driver,jdbcType=VARCHAR},
      model = #{model,jdbcType=VARCHAR},
      producer = #{producer,jdbcType=VARCHAR},
      useTime = #{usetime,jdbcType=TIMESTAMP},
      position = #{position,jdbcType=VARCHAR},
      gis = #{gis,jdbcType=VARCHAR},
      manager = #{manager,jdbcType=VARCHAR},
      createDate = #{createdate,jdbcType=TIMESTAMP},
      online_status = #{onlineStatus,jdbcType=INTEGER},
      run_status = #{runStatus,jdbcType=INTEGER},
      last_online_time = #{lastOnlineTime,jdbcType=TIMESTAMP},
      brand = #{brand,jdbcType=VARCHAR},
      username = #{username,jdbcType=VARCHAR},
      pwd = #{pwd,jdbcType=VARCHAR},
      callurl = #{callurl,jdbcType=VARCHAR},
      inorout = #{inorout,jdbcType=INTEGER},
      isAlarm = #{isAlarm,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>


  <update id="updateDeviceOnlineStatus" parameterType="com.qlhx.model.Facedevice">
 update device_face
    <set >
    <if test="onlineStatus != null" >
      online_status = #{onlineStatus,jdbcType=INTEGER},
    </if>
      <if test="onlineStatus == 1" >
        last_online_time=now()
      </if>
    </set>
    WHERE id = #{id,jdbcType=INTEGER}
  </update>
	<select id="getalldevicebymodel" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from device_face
		<where>
			<if test="model != null">
				model = #{model,jdbcType=VARCHAR}
			</if>
		</where>
		order by id asc
	</select>
  
  <select id="selectByIp" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from device_face
    where ip = #{ip,jdbcType=VARCHAR}
    limit 0,1
  </select>
  <select id="selectByIpandId"  resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from device_face
    where ip = #{ip,jdbcType=VARCHAR} AND  id!=#{id}
    limit 0,1
  </select>

  <select id="findAll" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from device_face
  </select>
</mapper>